---
/**
 * UTM Source Detector - Main page
 * A tool to identify traffic sources from URLs and UTM parameters.
 */
import "../styles/global.css";
import SourceDetector from "../components/SourceDetector.astro";

const title = "UTM Source Detector - Identify Your Traffic Sources";
const description =
  "Free online tool to analyze URLs and UTM parameters. Instantly identify traffic sources like Google Ads, Facebook, email campaigns, and more with confidence scoring.";
const canonicalURL = "https://utm-detector.jumax.dev";
const keywords =
  "UTM parameters, traffic source, marketing analytics, gclid, fbclid, Google Ads, Facebook Ads, campaign tracking, lead source identification";

const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  name: "UTM Source Detector",
  description: description,
  url: canonicalURL,
  applicationCategory: "BusinessApplication",
  operatingSystem: "Any",
  browserRequirements: "Requires JavaScript",
  offers: {
    "@type": "Offer",
    price: "0",
    priceCurrency: "USD",
  },
  featureList: [
    "URL parsing and analysis",
    "UTM parameter detection",
    "Click ID recognition (gclid, fbclid, msclkid, ttclid)",
    "Traffic source identification",
    "Paid vs organic detection",
    "Confidence scoring",
    "Privacy-first client-side processing",
  ],
};

const faqStructuredData = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: [
    {
      "@type": "Question",
      name: "What is a UTM parameter?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "UTM parameters are tags added to URLs to track the source, medium, and campaign of traffic. Common parameters include utm_source, utm_medium, utm_campaign, utm_content, and utm_term.",
      },
    },
    {
      "@type": "Question",
      name: "What is a click ID like gclid or fbclid?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Click IDs are unique identifiers automatically added by advertising platforms. Google Ads uses gclid, Facebook/Meta uses fbclid, Microsoft Ads uses msclkid, and TikTok uses ttclid. These help track paid advertising conversions.",
      },
    },
    {
      "@type": "Question",
      name: "Is my data safe when using this tool?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Yes, all analysis happens directly in your browser. No data is sent to any server. Your URLs and parameters remain completely private.",
      },
    },
  ],
};
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="UTM Source Detector" />

    <link rel="canonical" href={canonicalURL} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" sizes="32x32" />
    <link rel="apple-touch-icon" href="/favicon.svg" />
    <link rel="sitemap" href="/sitemap-index.xml" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:site_name" content="UTM Source Detector" />
    <meta property="og:locale" content="en_US" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />

    <meta name="robots" content="index, follow, max-image-preview:large" />
    <meta name="googlebot" content="index, follow" />
    <meta
      name="theme-color"
      content="#10b981"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#34d399"
      media="(prefers-color-scheme: dark)"
    />
    <meta name="color-scheme" content="light dark" />

    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />
    <script
      type="application/ld+json"
      set:html={JSON.stringify(faqStructuredData)}
    />
  </head>
  <body>
    <a href="#main-tool" class="skip-link">Skip to main tool</a>

    <div class="page-wrapper">
      <header class="header" role="banner">
        <div class="header-bg" aria-hidden="true"></div>
        <div class="container header-content">
          <h1 class="title">UTM Source Detector</h1>
          <p class="subtitle">
            Identify where your traffic comes from by analyzing URLs and UTM
            parameters. Perfect for marketers who need to quickly determine the
            source of a lead.
          </p>
        </div>
      </header>

      <main id="main-tool" class="main" role="main">
        <div class="container">
          <SourceDetector />
        </div>
      </main>

      <section class="info-section" aria-labelledby="features-heading">
        <div class="container">
          <h2 id="features-heading" class="visually-hidden">
            Features and Information
          </h2>
          <div class="info-grid">
            <article class="info-card">
              <h3>What This Tool Does</h3>
              <p>
                Paste a URL or enter UTM parameters, and this tool will analyze
                them to identify the traffic source. It detects advertising
                click IDs (like Google's gclid or Facebook's fbclid), matches
                UTM values against known platforms, and provides a confidence
                score for the detection.
              </p>
            </article>

            <article class="info-card">
              <h3>Supported Platforms</h3>
              <ul class="platform-list" role="list">
                <li>Google Ads &amp; Search</li>
                <li>Facebook &amp; Instagram</li>
                <li>TikTok</li>
                <li>LinkedIn</li>
                <li>Twitter/X</li>
                <li>Microsoft/Bing Ads</li>
                <li>Email platforms</li>
                <li>And many more...</li>
              </ul>
            </article>

            <article class="info-card">
              <h3>How Confidence Works</h3>
              <p>
                The confidence score is based on the signals found in the URL.
                Click IDs provide the highest confidence since they're added by
                ad platforms. UTM parameters provide moderate confidence, and
                pattern matching provides lower confidence. Multiple matching
                signals increase overall confidence.
              </p>
            </article>

            <article class="info-card">
              <h3>Privacy First</h3>
              <p>
                All analysis happens directly in your browser. No data is sent
                to any server. Your URLs and parameters stay completely private.
                This tool is open source and can be self-hosted if needed.
              </p>
            </article>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer" role="contentinfo">
      <div class="container">
        <p class="footer-text">
          UTM Source Detector is a free, open-source tool.
          <a href="https://github.com" target="_blank" rel="noopener noreferrer"
            >View on GitHub</a
          >
        </p>
      </div>
    </footer>
  </body>
</html>

<style>
  .skip-link {
    position: absolute;
    top: 0;
    left: 0;
    background: var(--color-primary);
    color: white;
    padding: var(--spacing-sm) var(--spacing-md);
    z-index: 100;
    border-radius: 0 0 var(--radius-md) 0;
    transform: translateY(-100%);
    transition: transform var(--transition-fast);
  }

  .skip-link:focus {
    transform: translateY(0);
  }

  .page-wrapper {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .header {
    position: relative;
    padding: var(--spacing-3xl) 0 var(--spacing-2xl);
    text-align: center;
    overflow: hidden;
  }

  .header-bg {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(
        ellipse 80% 50% at 50% -20%,
        rgba(16, 185, 129, 0.12),
        transparent
      ),
      radial-gradient(
        ellipse 60% 50% at 80% 50%,
        rgba(20, 184, 166, 0.08),
        transparent
      ),
      radial-gradient(
        ellipse 50% 40% at 20% 60%,
        rgba(5, 150, 105, 0.06),
        transparent
      );
    pointer-events: none;
  }

  @media (prefers-color-scheme: dark) {
    .header-bg {
      background:
        radial-gradient(
          ellipse 80% 50% at 50% -20%,
          rgba(52, 211, 153, 0.15),
          transparent
        ),
        radial-gradient(
          ellipse 60% 50% at 80% 50%,
          rgba(45, 212, 191, 0.1),
          transparent
        ),
        radial-gradient(
          ellipse 50% 40% at 20% 60%,
          rgba(16, 185, 129, 0.08),
          transparent
        );
    }
  }

  .header-content {
    position: relative;
    z-index: 1;
  }

  .title {
    font-size: clamp(var(--font-size-2xl), 5vw, var(--font-size-4xl));
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-md);
    letter-spacing: -0.02em;
  }

  .subtitle {
    font-size: var(--font-size-lg);
    color: var(--color-text-secondary);
    max-width: 38rem;
    margin: 0 auto;
    line-height: var(--line-height-relaxed);
  }

  .main {
    padding: var(--spacing-lg) 0 var(--spacing-3xl);
    flex: 1;
  }

  .info-section {
    padding: var(--spacing-3xl) 0;
    background-color: var(--color-surface);
    border-top: 1px solid var(--color-border);
  }

  .info-grid {
    display: grid;
    gap: var(--spacing-lg);
  }

  .info-card {
    padding: var(--spacing-lg);
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition:
      box-shadow var(--transition-normal),
      transform var(--transition-normal);
  }

  .info-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .info-card h3 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-sm);
  }

  .info-card p {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    line-height: var(--line-height-relaxed);
  }

  .platform-list {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xs) var(--spacing-md);
  }

  .platform-list li {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    padding-left: var(--spacing-md);
    position: relative;
  }

  .platform-list li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.5em;
    width: 6px;
    height: 6px;
    background-color: var(--color-primary);
    border-radius: 50%;
  }

  .footer {
    padding: var(--spacing-xl) 0;
    border-top: 1px solid var(--color-border);
    background-color: var(--color-background);
  }

  .footer-text {
    text-align: center;
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
  }

  .footer-text a {
    color: var(--color-text-secondary);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .footer-text a:hover {
    color: var(--color-primary);
  }

  @media (min-width: 640px) {
    .info-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .header {
      padding: var(--spacing-3xl) 0;
    }
  }
</style>
