---
/**
 * Input section component for URL and UTM parameter entry.
 * Provides two input modes: full URL or individual UTM parameters.
 */
---

<form class="input-form" aria-label="UTM source analysis form">
  <div class="input-tabs" role="tablist" aria-label="Choose input method">
    <button
      type="button"
      role="tab"
      id="tab-url"
      aria-controls="panel-url"
      aria-selected="true"
      class="tab-button active"
      data-tab="url"
    >
      Paste URL
    </button>
    <button
      type="button"
      role="tab"
      id="tab-utm"
      aria-controls="panel-utm"
      aria-selected="false"
      class="tab-button"
      data-tab="utm"
    >
      Enter UTM Parameters
    </button>
  </div>

  <div class="tab-panels">
    <fieldset
      id="panel-url"
      role="tabpanel"
      aria-labelledby="tab-url"
      class="tab-panel active"
      data-panel="url"
    >
      <legend class="visually-hidden">URL Input</legend>
      <div class="input-group">
        <label for="url-input">Full URL with tracking parameters</label>
        <input
          type="url"
          id="url-input"
          name="url"
          inputmode="url"
          placeholder="https://example.com/page?utm_source=google&utm_medium=cpc&gclid=..."
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
        />
        <p class="input-hint" id="url-hint">
          Paste the complete URL including all query parameters
        </p>
      </div>
    </fieldset>

    <fieldset
      id="panel-utm"
      role="tabpanel"
      aria-labelledby="tab-utm"
      class="tab-panel"
      data-panel="utm"
      hidden
    >
      <legend class="visually-hidden">UTM Parameters</legend>
      <div class="utm-grid">
        <div class="input-group">
          <label for="utm-source">
            utm_source <span class="label-hint" aria-label="required field"
              >(required)</span
            >
          </label>
          <input
            type="text"
            id="utm-source"
            name="utm_source"
            placeholder="google, facebook, newsletter"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />
        </div>

        <div class="input-group">
          <label for="utm-medium">utm_medium</label>
          <input
            type="text"
            id="utm-medium"
            name="utm_medium"
            placeholder="cpc, email, social, organic"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />
        </div>

        <div class="input-group">
          <label for="utm-campaign">utm_campaign</label>
          <input
            type="text"
            id="utm-campaign"
            name="utm_campaign"
            placeholder="spring_sale, brand_awareness"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />
        </div>

        <div class="input-group">
          <label for="utm-content">utm_content</label>
          <input
            type="text"
            id="utm-content"
            name="utm_content"
            placeholder="banner_ad, text_link"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />
        </div>

        <div class="input-group">
          <label for="utm-term">utm_term</label>
          <input
            type="text"
            id="utm-term"
            name="utm_term"
            placeholder="running shoes, marketing software"
            autocomplete="off"
            autocapitalize="off"
            spellcheck="false"
          />
        </div>
      </div>
    </fieldset>
  </div>

  <div class="action-row">
    <button
      type="submit"
      id="analyze-button"
      class="btn-primary analyze-button"
    >
      Analyze Source
    </button>
    <button type="reset" id="clear-button" class="btn-secondary clear-button">
      Clear
    </button>
  </div>
</form>

<style>
  .input-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-3xl);
  }

  .input-tabs {
    display: flex;
    gap: var(--spacing-xs);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-xs);
  }

  .tab-button {
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    color: var(--color-text-tertiary);
    border-radius: var(--radius-md) var(--radius-md) 0 0;
    transition:
      color var(--transition-fast),
      background-color var(--transition-fast);
  }

  .tab-button:hover {
    color: var(--color-text-primary);
    background-color: var(--color-surface-elevated);
  }

  .tab-button.active {
    color: var(--color-primary);
    background-color: var(--color-surface);
    border-bottom: 2px solid var(--color-primary);
    margin-bottom: -1px;
  }

  .tab-panel {
    display: none;
  }

  .tab-panel.active {
    display: block;
    animation: fadeIn var(--transition-normal) ease;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .input-group label {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }

  .label-hint {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
    font-weight: var(--font-weight-normal);
  }

  .input-hint {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin-top: var(--spacing-xs);
  }

  .utm-grid {
    display: grid;
    gap: var(--spacing-md);
  }

  @media (min-width: 640px) {
    .utm-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .utm-grid .input-group:first-child {
      grid-column: span 2;
    }
  }

  .action-row {
    display: flex;
    gap: var(--spacing-sm);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--color-border);
  }

  .analyze-button {
    flex: 1;
    padding: var(--spacing-md) var(--spacing-lg);
    font-size: var(--font-size-lg);
  }

  .clear-button {
    padding: var(--spacing-md) var(--spacing-lg);
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .tab-panel {
    border: none;
    padding: 0;
    margin: 0;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>
